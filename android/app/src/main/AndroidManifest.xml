<manifest xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- 
        PERMISSÕES DO SISTEMA DE PROVAS
        Todas as permissões foram mapeadas e justificadas conforme MPC.md e permissions.yaml
        Escopo mínimo: apenas permissões essenciais para funcionalidades principais
    -->
    
    <!-- Permissão de instalação (normal): Comunicação com Firebase -->
    <uses-permission android:name="android.permission.INTERNET" />
    
    <!-- Permissão de instalação (normal): Verificação de conectividade -->
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    
    <!-- Permissão de instalação (normal): Manter tela ativa durante provas -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    
    <!-- Permissão de execução (dangerous): Notificações push (Android 13+) -->
    <uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
    
    <!-- Permissão de execução (dangerous): Acesso a imagens da galeria (Android 13+) -->
    <uses-permission android:name="android.permission.READ_MEDIA_IMAGES" />
    
    <!-- Permissão de execução (dangerous): Acesso a imagens (Android < 13) -->
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" 
        android:maxSdkVersion="32" />
    
    <!-- Permissão de execução (dangerous): Acesso à câmera para captura de fotos -->
    <uses-permission android:name="android.permission.CAMERA" />
    
    <!-- 
        NOTA: WRITE_EXTERNAL_STORAGE não é necessária porque:
        - Android 10+: O plugin printing usa Scoped Storage (não requer permissão dangerous)
        - Android < 10: O plugin printing gerencia a permissão automaticamente via plugin
        - Alternativa: Compartilhamento direto via Intent sem salvar no dispositivo
        Ver documentação em /docs/MPC.md e /docs/permissions.yaml
    -->
    
    <application
        android:label="Sistema de Provas"
        android:name="${applicationName}"
        android:icon="@mipmap/launcher_icon">
        <activity
            android:name=".MainActivity"
            android:exported="true"
            android:launchMode="singleTop"
            android:taskAffinity=""
            android:theme="@style/LaunchTheme"
            android:configChanges="orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode"
            android:hardwareAccelerated="true"
            android:windowSoftInputMode="adjustResize">
            <!-- Specifies an Android theme to apply to this Activity as soon as
                 the Android process has started. This theme is visible to the user
                 while the Flutter UI initializes. After that, this theme continues
                 to determine the Window background behind the Flutter UI. -->
            <meta-data
              android:name="io.flutter.embedding.android.NormalTheme"
              android:resource="@style/NormalTheme"
              />
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <!-- Don't delete the meta-data below.
             This is used by the Flutter tool to generate GeneratedPluginRegistrant.java -->
        <meta-data
            android:name="flutterEmbedding"
            android:value="2" />
            
        <!-- Configurações do Firebase -->
        <meta-data
            android:name="com.google.firebase.messaging.default_notification_channel_id"
            android:value="default_channel" />
    </application>
    <!-- Required to query activities that can process text, see:
         https://developer.android.com/training/package-visibility and
         https://developer.android.com/reference/android/content/Intent#ACTION_PROCESS_TEXT.

         In particular, this is used by the Flutter engine in io.flutter.plugin.text.ProcessTextPlugin. -->
    <queries>
        <intent>
            <action android:name="android.intent.action.PROCESS_TEXT"/>
            <data android:mimeType="text/plain"/>
        </intent>
    </queries>
</manifest>
